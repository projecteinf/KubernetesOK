# Verificació nodes
## Test
```bash
kubectl get nodes
```
## Resultat

```
NAME       STATUS   ROLES           AGE     VERSION
master     Ready    control-plane   6d22h   v1.28.15
workeri    Ready    <none>          16h     v1.28.15
workerii   Ready    <none>          6d21h   v1.28.15
```

## Test
```bash
kubectl describe nodes
```

## Resultat
```
Name:               master
Roles:              control-plane
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/os=linux
                    kubernetes.io/arch=amd64
                    kubernetes.io/hostname=master
                    kubernetes.io/os=linux
                    node-role.kubernetes.io/control-plane=
                    node.kubernetes.io/exclude-from-external-load-balancers=
Annotations:        kubeadm.alpha.kubernetes.io/cri-socket: unix:///var/run/containerd/containerd.sock
                    node.alpha.kubernetes.io/ttl: 0
                    projectcalico.org/IPv4Address: 172.20.1.1/16
                    projectcalico.org/IPv4IPIPTunnelAddr: 10.244.219.64
                    volumes.kubernetes.io/controller-managed-attach-detach: true
CreationTimestamp:  Tue, 24 Dec 2024 11:58:47 +0100
Taints:             node-role.kubernetes.io/control-plane:NoSchedule
Unschedulable:      false
Lease:
  HolderIdentity:  master
  AcquireTime:     <unset>
  RenewTime:       Tue, 31 Dec 2024 10:24:16 +0100
Conditions:
  Type                 Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message
  ----                 ------  -----------------                 ------------------                ------                       -------
  NetworkUnavailable   False   Tue, 31 Dec 2024 10:16:41 +0100   Tue, 31 Dec 2024 10:16:41 +0100   CalicoIsUp                   Calico is running on this node
  MemoryPressure       False   Tue, 31 Dec 2024 10:21:43 +0100   Tue, 24 Dec 2024 11:58:47 +0100   KubeletHasSufficientMemory   kubelet has sufficient memory available
  DiskPressure         False   Tue, 31 Dec 2024 10:21:43 +0100   Tue, 24 Dec 2024 11:58:47 +0100   KubeletHasNoDiskPressure     kubelet has no disk pressure
  PIDPressure          False   Tue, 31 Dec 2024 10:21:43 +0100   Tue, 24 Dec 2024 11:58:47 +0100   KubeletHasSufficientPID      kubelet has sufficient PID available
  Ready                True    Tue, 31 Dec 2024 10:21:43 +0100   Tue, 24 Dec 2024 12:11:38 +0100   KubeletReady                 kubelet is posting ready status. AppArmor enabled
Addresses:
  InternalIP:  172.20.1.1
  Hostname:    master
Capacity:
  cpu:                4
  ephemeral-storage:  60624740Ki
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             6064912Ki
  pods:               110
Allocatable:
  cpu:                4
  ephemeral-storage:  55871760292
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             5962512Ki
  pods:               110
System Info:
  Machine ID:                 08e8cb5b13664fe982297adf37e43c7e
  System UUID:                67cbcbb6-cbcf-4f25-a392-373fc69b27e9
  Boot ID:                    0f7e04a2-4bad-4ddd-a893-eab1f32f4294
  Kernel Version:             6.1.0-18-amd64
  OS Image:                   Debian GNU/Linux 12 (bookworm)
  Operating System:           linux
  Architecture:               amd64
  Container Runtime Version:  containerd://1.6.20
  Kubelet Version:            v1.28.15
  Kube-Proxy Version:         v1.28.15
PodCIDR:                      10.244.0.0/24
PodCIDRs:                     10.244.0.0/24
Non-terminated Pods:          (9 in total)
  Namespace                   Name                                      CPU Requests  CPU Limits  Memory Requests  Memory Limits  Age
  ---------                   ----                                      ------------  ----------  ---------------  -------------  ---
  kube-system                 calico-kube-controllers-77bd7c5b-78mc7    0 (0%)        0 (0%)      0 (0%)           0 (0%)         6d22h
  kube-system                 calico-node-qgsvf                         250m (6%)     0 (0%)      0 (0%)           0 (0%)         6d22h
  kube-system                 coredns-5dd5756b68-2vt2d                  100m (2%)     0 (0%)      70Mi (1%)        170Mi (2%)     6d22h
  kube-system                 coredns-5dd5756b68-f7ngv                  100m (2%)     0 (0%)      70Mi (1%)        170Mi (2%)     6d22h
  kube-system                 etcd-master                               100m (2%)     0 (0%)      100Mi (1%)       0 (0%)         6d22h
  kube-system                 kube-apiserver-master                     250m (6%)     0 (0%)      0 (0%)           0 (0%)         6d22h
  kube-system                 kube-controller-manager-master            200m (5%)     0 (0%)      0 (0%)           0 (0%)         6d22h
  kube-system                 kube-proxy-nz8gb                          0 (0%)        0 (0%)      0 (0%)           0 (0%)         6d22h
  kube-system                 kube-scheduler-master                     100m (2%)     0 (0%)      0 (0%)           0 (0%)         6d22h
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  Resource           Requests     Limits
  --------           --------     ------
  cpu                1100m (27%)  0 (0%)
  memory             240Mi (4%)   340Mi (5%)
  ephemeral-storage  0 (0%)       0 (0%)
  hugepages-1Gi      0 (0%)       0 (0%)
  hugepages-2Mi      0 (0%)       0 (0%)
Events:
  Type     Reason                   Age                    From             Message
  ----     ------                   ----                   ----             -------
  Normal   Starting                 7m48s                  kube-proxy       
  Normal   Starting                 7m54s                  kubelet          Starting kubelet.
  Warning  InvalidDiskCapacity      7m54s                  kubelet          invalid capacity 0 on image filesystem
  Normal   NodeAllocatableEnforced  7m54s                  kubelet          Updated Node Allocatable limit across pods
  Normal   NodeHasSufficientMemory  7m53s (x8 over 7m54s)  kubelet          Node master status is now: NodeHasSufficientMemory
  Normal   NodeHasNoDiskPressure    7m53s (x7 over 7m54s)  kubelet          Node master status is now: NodeHasNoDiskPressure
  Normal   NodeHasSufficientPID     7m53s (x7 over 7m54s)  kubelet          Node master status is now: NodeHasSufficientPID
  Normal   RegisteredNode           7m20s                  node-controller  Node master event: Registered Node master in Controller


Name:               workeri
Roles:              <none>
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/os=linux
                    kubernetes.io/arch=amd64
                    kubernetes.io/hostname=workeri
                    kubernetes.io/os=linux
Annotations:        kubeadm.alpha.kubernetes.io/cri-socket: unix:///var/run/containerd/containerd.sock
                    node.alpha.kubernetes.io/ttl: 0
                    projectcalico.org/IPv4Address: 172.20.1.2/16
                    projectcalico.org/IPv4IPIPTunnelAddr: 10.244.134.128
                    volumes.kubernetes.io/controller-managed-attach-detach: true
CreationTimestamp:  Mon, 30 Dec 2024 17:26:38 +0100
Taints:             <none>
Unschedulable:      false
Lease:
  HolderIdentity:  workeri
  AcquireTime:     <unset>
  RenewTime:       Tue, 31 Dec 2024 10:24:16 +0100
Conditions:
  Type                 Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message
  ----                 ------  -----------------                 ------------------                ------                       -------
  NetworkUnavailable   False   Tue, 31 Dec 2024 10:24:04 +0100   Tue, 31 Dec 2024 10:24:04 +0100   CalicoIsUp                   Calico is running on this node
  MemoryPressure       False   Tue, 31 Dec 2024 10:21:42 +0100   Mon, 30 Dec 2024 17:26:38 +0100   KubeletHasSufficientMemory   kubelet has sufficient memory available
  DiskPressure         False   Tue, 31 Dec 2024 10:21:42 +0100   Mon, 30 Dec 2024 17:26:38 +0100   KubeletHasNoDiskPressure     kubelet has no disk pressure
  PIDPressure          False   Tue, 31 Dec 2024 10:21:42 +0100   Mon, 30 Dec 2024 17:26:38 +0100   KubeletHasSufficientPID      kubelet has sufficient PID available
  Ready                True    Tue, 31 Dec 2024 10:21:42 +0100   Mon, 30 Dec 2024 17:27:28 +0100   KubeletReady                 kubelet is posting ready status. AppArmor enabled
Addresses:
  InternalIP:  172.20.1.2
  Hostname:    workeri
Capacity:
  cpu:                2
  ephemeral-storage:  60624740Ki
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             4007172Ki
  pods:               110
Allocatable:
  cpu:                2
  ephemeral-storage:  55871760292
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             3904772Ki
  pods:               110
System Info:
  Machine ID:                 08e8cb5b13664fe982297adf37e43c7e
  System UUID:                f21865d3-bf73-4256-b174-585bcf7cd5fe
  Boot ID:                    8a6e8c5b-ad8b-4784-9ebb-ed2d4013c3f9
  Kernel Version:             6.1.0-18-amd64
  OS Image:                   Debian GNU/Linux 12 (bookworm)
  Operating System:           linux
  Architecture:               amd64
  Container Runtime Version:  containerd://1.6.20
  Kubelet Version:            v1.28.15
  Kube-Proxy Version:         v1.28.15
PodCIDR:                      10.244.2.0/24
PodCIDRs:                     10.244.2.0/24
Non-terminated Pods:          (2 in total)
  Namespace                   Name                 CPU Requests  CPU Limits  Memory Requests  Memory Limits  Age
  ---------                   ----                 ------------  ----------  ---------------  -------------  ---
  kube-system                 calico-node-qsnks    250m (12%)    0 (0%)      0 (0%)           0 (0%)         16h
  kube-system                 kube-proxy-6w54k     0 (0%)        0 (0%)      0 (0%)           0 (0%)         16h
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  Resource           Requests    Limits
  --------           --------    ------
  cpu                250m (12%)  0 (0%)
  memory             0 (0%)      0 (0%)
  ephemeral-storage  0 (0%)      0 (0%)
  hugepages-1Gi      0 (0%)      0 (0%)
  hugepages-2Mi      0 (0%)      0 (0%)
Events:
  Type     Reason                   Age                    From             Message
  ----     ------                   ----                   ----             -------
  Normal   Starting                 13h                    kube-proxy       
  Normal   Starting                 38s                    kube-proxy       
  Normal   Starting                 3m29s                  kube-proxy       
  Normal   Starting                 14h                    kube-proxy       
  Normal   Starting                 14h                    kube-proxy       
  Normal   Starting                 14h                    kube-proxy       
  Normal   Starting                 14h                    kube-proxy       
  Normal   Starting                 14h                    kube-proxy       
  Normal   Starting                 14h                    kube-proxy       
  Normal   Starting                 5m21s                  kube-proxy       
  Normal   Starting                 14h                    kube-proxy       
  Normal   Starting                 14h                    kube-proxy       
  Normal   Starting                 13h                    kube-proxy       
  Normal   Starting                 6m58s                  kube-proxy       
  Normal   Starting                 7m42s                  kube-proxy       
  Normal   NodeAllocatableEnforced  7m56s                  kubelet          Updated Node Allocatable limit across pods
  Warning  InvalidDiskCapacity      7m56s                  kubelet          invalid capacity 0 on image filesystem
  Normal   Starting                 7m56s                  kubelet          Starting kubelet.
  Normal   NodeHasSufficientPID     7m50s (x7 over 7m56s)  kubelet          Node workeri status is now: NodeHasSufficientPID
  Normal   NodeHasNoDiskPressure    7m50s (x7 over 7m56s)  kubelet          Node workeri status is now: NodeHasNoDiskPressure
  Normal   NodeHasSufficientMemory  7m50s (x7 over 7m56s)  kubelet          Node workeri status is now: NodeHasSufficientMemory
  Warning  Rebooted                 7m49s                  kubelet          Node workeri has been rebooted, boot id: 8a6e8c5b-ad8b-4784-9ebb-ed2d4013c3f9
  Normal   RegisteredNode           7m20s                  node-controller  Node workeri event: Registered Node workeri in Controller


Name:               workerii
Roles:              <none>
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/os=linux
                    kubernetes.io/arch=amd64
                    kubernetes.io/hostname=workerii
                    kubernetes.io/os=linux
Annotations:        kubeadm.alpha.kubernetes.io/cri-socket: unix:///var/run/containerd/containerd.sock
                    node.alpha.kubernetes.io/ttl: 0
                    projectcalico.org/IPv4Address: 172.20.1.3/16
                    projectcalico.org/IPv4IPIPTunnelAddr: 10.244.252.192
                    volumes.kubernetes.io/controller-managed-attach-detach: true
CreationTimestamp:  Tue, 24 Dec 2024 12:32:35 +0100
Taints:             <none>
Unschedulable:      false
Lease:
  HolderIdentity:  workerii
  AcquireTime:     <unset>
  RenewTime:       Tue, 31 Dec 2024 10:24:24 +0100
Conditions:
  Type                 Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message
  ----                 ------  -----------------                 ------------------                ------                       -------
  NetworkUnavailable   False   Tue, 31 Dec 2024 10:24:02 +0100   Tue, 31 Dec 2024 10:24:02 +0100   CalicoIsUp                   Calico is running on this node
  MemoryPressure       False   Tue, 31 Dec 2024 10:21:43 +0100   Tue, 24 Dec 2024 12:32:35 +0100   KubeletHasSufficientMemory   kubelet has sufficient memory available
  DiskPressure         False   Tue, 31 Dec 2024 10:21:43 +0100   Tue, 24 Dec 2024 12:32:35 +0100   KubeletHasNoDiskPressure     kubelet has no disk pressure
  PIDPressure          False   Tue, 31 Dec 2024 10:21:43 +0100   Tue, 24 Dec 2024 12:32:35 +0100   KubeletHasSufficientPID      kubelet has sufficient PID available
  Ready                True    Tue, 31 Dec 2024 10:21:43 +0100   Tue, 24 Dec 2024 12:32:54 +0100   KubeletReady                 kubelet is posting ready status. AppArmor enabled
Addresses:
  InternalIP:  172.20.1.3
  Hostname:    workerii
Capacity:
  cpu:                2
  ephemeral-storage:  60624740Ki
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             4007172Ki
  pods:               110
Allocatable:
  cpu:                2
  ephemeral-storage:  55871760292
  hugepages-1Gi:      0
  hugepages-2Mi:      0
  memory:             3904772Ki
  pods:               110
System Info:
  Machine ID:                 08e8cb5b13664fe982297adf37e43c7e
  System UUID:                a5a9f4ed-237a-4164-81e4-57809a47c528
  Boot ID:                    f0fbb8c7-f365-4735-9a44-358dd173abe8
  Kernel Version:             6.1.0-18-amd64
  OS Image:                   Debian GNU/Linux 12 (bookworm)
  Operating System:           linux
  Architecture:               amd64
  Container Runtime Version:  containerd://1.6.20
  Kubelet Version:            v1.28.15
  Kube-Proxy Version:         v1.28.15
PodCIDR:                      10.244.1.0/24
PodCIDRs:                     10.244.1.0/24
Non-terminated Pods:          (2 in total)
  Namespace                   Name                 CPU Requests  CPU Limits  Memory Requests  Memory Limits  Age
  ---------                   ----                 ------------  ----------  ---------------  -------------  ---
  kube-system                 calico-node-tqrf7    250m (12%)    0 (0%)      0 (0%)           0 (0%)         6d21h
  kube-system                 kube-proxy-qhp8r     0 (0%)        0 (0%)      0 (0%)           0 (0%)         6d21h
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  Resource           Requests    Limits
  --------           --------    ------
  cpu                250m (12%)  0 (0%)
  memory             0 (0%)      0 (0%)
  ephemeral-storage  0 (0%)      0 (0%)
  hugepages-1Gi      0 (0%)      0 (0%)
  hugepages-2Mi      0 (0%)      0 (0%)
Events:
  Type     Reason                   Age                    From             Message
  ----     ------                   ----                   ----             -------
  Normal   Starting                 14h                    kube-proxy       
  Normal   Starting                 14h                    kube-proxy       
  Normal   Starting                 14h                    kube-proxy       
  Normal   Starting                 14h                    kube-proxy       
  Normal   Starting                 14h                    kube-proxy       
  Normal   Starting                 14h                    kube-proxy       
  Normal   Starting                 7m32s                  kube-proxy       
  Normal   Starting                 14h                    kube-proxy       
  Normal   Starting                 13h                    kube-proxy       
  Normal   Starting                 13h                    kube-proxy       
  Normal   Starting                 2m28s                  kube-proxy       
  Normal   Starting                 5m7s                   kube-proxy       
  Normal   Starting                 5m52s                  kube-proxy       
  Normal   Starting                 7m51s                  kubelet          Starting kubelet.
  Warning  InvalidDiskCapacity      7m51s                  kubelet          invalid capacity 0 on image filesystem
  Normal   NodeHasSufficientPID     7m50s (x2 over 7m50s)  kubelet          Node workerii status is now: NodeHasSufficientPID
  Normal   NodeAllocatableEnforced  7m50s                  kubelet          Updated Node Allocatable limit across pods
  Warning  Rebooted                 7m50s                  kubelet          Node workerii has been rebooted, boot id: f0fbb8c7-f365-4735-9a44-358dd173abe8
  Normal   NodeHasNoDiskPressure    7m50s (x2 over 7m50s)  kubelet          Node workerii status is now: NodeHasNoDiskPressure
  Normal   NodeHasSufficientMemory  7m50s (x2 over 7m50s)  kubelet          Node workerii status is now: NodeHasSufficientMemory
  Normal   RegisteredNode           7m20s                  node-controller  Node workerii event: Registered Node workerii in Controller
```
## Test
```bash
kubectl get pods -n kube-system
```
## Resultat
```
NAME                                     READY   STATUS             RESTARTS         AGE
calico-kube-controllers-77bd7c5b-78mc7   1/1     Running            2 (24m ago)      6d22h
calico-node-qgsvf                        0/1     Running            2 (24m ago)      6d22h
calico-node-qsnks                        0/1     CrashLoopBackOff   44 (64s ago)     17h
calico-node-tqrf7                        0/1     CrashLoopBackOff   74 (4m21s ago)   6d22h
coredns-5dd5756b68-2vt2d                 1/1     Running            2 (24m ago)      6d22h
coredns-5dd5756b68-f7ngv                 1/1     Running            2 (24m ago)      6d22h
etcd-master                              1/1     Running            2 (24m ago)      6d22h
kube-apiserver-master                    1/1     Running            2 (24m ago)      6d22h
kube-controller-manager-master           1/1     Running            2 (24m ago)      6d22h
kube-proxy-6w54k                         1/1     Running            42 (5m27s ago)   17h
kube-proxy-nz8gb                         1/1     Running            2 (24m ago)      6d22h
kube-proxy-qhp8r                         0/1     CrashLoopBackOff   67 (56s ago)     6d22h
kube-scheduler-master                    1/1     Running            2 (24m ago)      6d22h
```

Alguns elements no estan funcionant de forma correcte:
```
NAME                                     READY   STATUS             RESTARTS         AGE
calico-node-qgsvf                        0/1     Running            2 (24m ago)      6d22h
```
Hauria d'estar READY 1/1

```
NAME                                     READY   STATUS             RESTARTS         AGE
calico-node-qsnks                        0/1     CrashLoopBackOff   44 (64s ago)     17h
calico-node-tqrf7                        0/1     CrashLoopBackOff   74 (4m21s ago)   6d22h
kube-proxy-qhp8r                         0/1     CrashLoopBackOff   67 (56s ago)     6d22h
```
El seu estat és CrashLoopBackOff
