# Crear configuració per defecte
```bash
sudo mkdir -p /etc/containerd
sudo containerd config default | sudo tee /etc/containerd/config.toml
```

## Ajustar configuració 
```bash
CONFIG_FILE="/etc/containerd/config.toml"

if [[ -f $CONFIG_FILE ]]; then
    # Substitueix el valor de SystemdCgroup per true
    sudo sed -i '/plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc.options/,/}/ s/SystemdCgroup = false/SystemdCgroup = true/' $CONFIG_FILE
    echo "S'ha actualitzat SystemdCgroup a true al fitxer $CONFIG_FILE."
else
    echo "El fitxer $CONFIG_FILE no existeix. Assegura't que containerd està configurat."
fi
```

# Verificació

## Paràmetre SystemdCgroup
```bash
grep 'plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc.options' /etc/containerd/config.toml -A 12 | grep SystemdCgroup
``` 
** Sortida **
```
SystemdCgroup = true
```


# Especificar runtime endpoint de containerd
```bash
echo "runtime-endpoint: unix:///run/containerd/containerd.sock" | sudo tee /etc/crictl.yaml
```

# Aplicar configuració 
```bash
sudo systemctl restart containerd
```
# Arrencada automàtica quan s'inicia
```bash
sudo systemctl enable containerd
```

