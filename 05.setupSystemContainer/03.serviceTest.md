# Verficació estat servei
```bash
sudo systemctl status containerd --no-pager 
```
## Sortida
```
● containerd.service - containerd container runtime
     Loaded: loaded (/lib/systemd/system/containerd.service; enabled; preset: enabled)
     Active: active (running) since Sat 2024-12-21 13:12:02 CET; 5min ago
       Docs: https://containerd.io
   Main PID: 4631 (containerd)
      Tasks: 9
     Memory: 13.4M
        CPU: 1.050s
     CGroup: /system.slice/containerd.service
             └─4631 /usr/bin/containerd

de des. 21 13:12:02 master containerd[4631]: time="2024-12-21T13:12:02.688650084+01:00" level=info msg="Start subscribing containerd event"
de des. 21 13:12:02 master containerd[4631]: time="2024-12-21T13:12:02.688779365+01:00" level=info msg="Start recovering state"
de des. 21 13:12:02 master containerd[4631]: time="2024-12-21T13:12:02.688941293+01:00" level=info msg="Start event monitor"
de des. 21 13:12:02 master containerd[4631]: time="2024-12-21T13:12:02.689032039+01:00" level=info msg=serving... address=/run/containerd/containerd.sock.ttrpc
de des. 21 13:12:02 master containerd[4631]: time="2024-12-21T13:12:02.689040479+01:00" level=info msg="Start snapshots syncer"
de des. 21 13:12:02 master containerd[4631]: time="2024-12-21T13:12:02.689126676+01:00" level=info msg=serving... address=/run/containerd/containerd.sock
de des. 21 13:12:02 master containerd[4631]: time="2024-12-21T13:12:02.689137834+01:00" level=info msg="Start cni network conf syncer for default"
de des. 21 13:12:02 master containerd[4631]: time="2024-12-21T13:12:02.689235865+01:00" level=info msg="Start streaming server"
de des. 21 13:12:02 master systemd[1]: Started containerd.service - containerd container runtime.
de des. 21 13:12:02 master containerd[4631]: time="2024-12-21T13:12:02.689788895+01:00" level=info msg="containerd successfully booted in 0.048241s"
```

# Verificació funcionament servei
```bash
sudo crictl info
```
No ha de donar cap error. Si dóna errors, pot ser problema amb la definició del endpoint. En el fitxer (02.setupContainerd.md) hi ha les instruccions per a crear el fitxer de configurció (/etc/crictl.yaml) i definir el endpoint (runtime-endpoint: unix:///run/containerd/containerd.sock)

```
{
  "status": {
    "conditions": [
      {
        "type": "RuntimeReady",
        "status": true,
        "reason": "",
        "message": ""
      },
      {
        "type": "NetworkReady",
        "status": false,
        "reason": "NetworkPluginNotReady",
        "message": "Network plugin returns error: cni plugin not initialized"
      }
    ]
  },
  "cniconfig": {
    "PluginDirs": [
      "/opt/cni/bin"
    ],
    "PluginConfDir": "/etc/cni/net.d",
    "PluginMaxConfNum": 1,
    "Prefix": "eth",
    "Networks": [
      {
        "Config": {
          "Name": "cni-loopback",
          "CNIVersion": "0.3.1",
          "Plugins": [
            {
              "Network": {
                "type": "loopback",
                "ipam": {},
                "dns": {}
              },
              "Source": "{\"type\":\"loopback\"}"
            }
          ],
          "Source": "{\n\"cniVersion\": \"0.3.1\",\n\"name\": \"cni-loopback\",\n\"plugins\": [{\n  \"type\": \"loopback\"\n}]\n}"
        },
        "IFName": "lo"
      }
    ]
  },
  "config": {
    "containerd": {
      "snapshotter": "overlayfs",
      "defaultRuntimeName": "runc",
      "defaultRuntime": {
        "runtimeType": "",
        "runtimePath": "",
        "runtimeEngine": "",
        "PodAnnotations": [],
        "ContainerAnnotations": [],
        "runtimeRoot": "",
        "options": {},
        "privileged_without_host_devices": false,
        "baseRuntimeSpec": "",
        "cniConfDir": "",
        "cniMaxConfNum": 0
      },
      "untrustedWorkloadRuntime": {
        "runtimeType": "",
        "runtimePath": "",
        "runtimeEngine": "",
        "PodAnnotations": [],
        "ContainerAnnotations": [],
        "runtimeRoot": "",
        "options": {},
        "privileged_without_host_devices": false,
        "baseRuntimeSpec": "",
        "cniConfDir": "",
        "cniMaxConfNum": 0
      },
      "runtimes": {
        "runc": {
          "runtimeType": "io.containerd.runc.v2",
          "runtimePath": "",
          "runtimeEngine": "",
          "PodAnnotations": [],
          "ContainerAnnotations": [],
          "runtimeRoot": "",
          "options": {
            "BinaryName": "",
            "CriuImagePath": "",
            "CriuPath": "",
            "CriuWorkPath": "",
            "IoGid": 0,
            "IoUid": 0,
            "NoNewKeyring": false,
            "NoPivotRoot": false,
            "Root": "",
            "ShimCgroup": "",
            "SystemdCgroup": true
          },
          "privileged_without_host_devices": false,
          "baseRuntimeSpec": "",
          "cniConfDir": "",
          "cniMaxConfNum": 0
        }
      },
      "noPivot": false,
      "disableSnapshotAnnotations": true,
      "discardUnpackedLayers": false,
      "ignoreRdtNotEnabledErrors": false
    },
    "cni": {
      "binDir": "/opt/cni/bin",
      "confDir": "/etc/cni/net.d",
      "maxConfNum": 1,
      "confTemplate": "",
      "ipPref": ""
    },
    "registry": {
      "configPath": "",
      "mirrors": {},
      "configs": {},
      "auths": {},
      "headers": {}
    },
    "imageDecryption": {
      "keyModel": "node"
    },
    "disableTCPService": true,
    "streamServerAddress": "127.0.0.1",
    "streamServerPort": "0",
    "streamIdleTimeout": "4h0m0s",
    "enableSelinux": false,
    "selinuxCategoryRange": 1024,
    "sandboxImage": "registry.k8s.io/pause:3.6",
    "statsCollectPeriod": 10,
    "systemdCgroup": false,
    "enableTLSStreaming": false,
    "x509KeyPairStreaming": {
      "tlsCertFile": "",
      "tlsKeyFile": ""
    },
    "maxContainerLogSize": 16384,
    "disableCgroup": false,
    "disableApparmor": false,
    "restrictOOMScoreAdj": false,
    "maxConcurrentDownloads": 3,
    "disableProcMount": false,
    "unsetSeccompProfile": "",
    "tolerateMissingHugetlbController": true,
    "disableHugetlbController": true,
    "device_ownership_from_security_context": false,
    "ignoreImageDefinedVolumes": false,
    "netnsMountsUnderStateDir": false,
    "enableUnprivilegedPorts": false,
    "enableUnprivilegedICMP": false,
    "containerdRootDir": "/var/lib/containerd",
    "containerdEndpoint": "/run/containerd/containerd.sock",
    "rootDir": "/var/lib/containerd/io.containerd.grpc.v1.cri",
    "stateDir": "/run/containerd/io.containerd.grpc.v1.cri"
  },
  "golang": "go1.19.8",
  "lastCNILoadStatus": "cni config load failed: no network config found in /etc/cni/net.d: cni plugin not initialized: failed to load cni config",
  "lastCNILoadStatus.default": "cni config load failed: no network config found in /etc/cni/net.d: cni plugin not initialized: failed to load cni config"
}
```

L'error 
```
  "lastCNILoadStatus.default": "cni config load failed: no network config found in /etc/cni/net.d: cni plugin not initialized: failed to load cni config"
```
és normal per què encara no s'ha instal·lat cap "Container Network Interfacei (CNI)"
